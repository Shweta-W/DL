#create ec2 instance 
#add security inbound rule --- custom tcp --8080 

# 1. Update system
sudo apt update && sudo apt upgrade -y

# 2. Install Java (required for Jenkins)
sudo apt install fontconfig openjdk-17-jre -y

# 3. Create keyring directory (to store GPG key)
sudo mkdir -p /usr/share/keyrings

# 4. Import Jenkins GPG key (correct key for 2024+)
curl -fsSL https://pkg.jenkins.io/debian/jenkins.io-2023.key | sudo tee /usr/share/keyrings/jenkins-keyring.asc > /dev/null

# 5. Add Jenkins repository (use debian, not debian-stable)
echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian binary/" | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null

# 6. Update system again to load Jenkins repo
sudo apt update

# 7. Install Jenkins
sudo apt install jenkins -y

# 8. Enable Jenkins to start at boot
sudo systemctl enable jenkins

# 9. Start Jenkins service
sudo systemctl start jenkins


sudo cat /var/lib/jenkins/secrets/initialAdminPassword
# 10. Check Jenkins status
sudo systemctl status jenkins


## runs on https://<public ip >:8080
